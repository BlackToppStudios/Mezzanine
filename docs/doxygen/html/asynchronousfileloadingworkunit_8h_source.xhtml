<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>/home/Code/Mezzanine/Mezzanine/src/Threading/asynchronousfileloadingworkunit.h Source File</title>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="DoxyStyle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script> 
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;" nowrap="nowrap">
   <div id="projectname"><a href="http://blacktoppstudios.com"><img src="logogreen100pxtall.png"/></a>MezzanineEngine&#160;<span id="projectnumber">September&nbsp;15,&nbsp;2013</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.xhtml"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.xhtml"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.xhtml"><span>Namespaces</span></a></li>
      <li><a href="annotated.xhtml"><span>Classes</span></a></li>
      <li class="current"><a href="files.xhtml"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.xhtml"><span>File&#160;List</span></a></li>
      <li><a href="globals.xhtml"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_df2e1c8414b6a086be441ff04537838a.xhtml">Mezzanine</a></li><li class="navelem"><a class="el" href="dir_2b71fc9949116feedacddb93a79d832d.xhtml">src</a></li><li class="navelem"><a class="el" href="dir_0a62840f9a5d42526b8d2f414eb5925f.xhtml">Threading</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">asynchronousfileloadingworkunit.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="asynchronousfileloadingworkunit_8h.xhtml">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// The DAGFrameScheduler is a Multi-Threaded lock free and wait free scheduling library.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Â© Copyright 2010 - 2013 BlackTopp Studios Inc.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* This file is part of The DAGFrameScheduler.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    The DAGFrameScheduler is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    The DAGFrameScheduler is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    along with The DAGFrameScheduler.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* The original authors have included a copy of the license specified above in the</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">   &#39;doc&#39; folder. See &#39;gpl.txt&#39;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* We welcome the use of the DAGFrameScheduler to anyone, including companies who wish to</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">   Build professional software and charge for their product.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">   However there are some practical restrictions, so if your project involves</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">   any of the following you should contact us and we will try to work something</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">   out:</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    - DRM or Copy Protection of any kind(except Copyrights)</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">    - Software Patents You Do Not Wish to Freely License</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">    - Any Kind of Linking to Non-GPL licensed Works</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">    - Are Currently In Violation of Another Copyright Holder&#39;s GPL License</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">    - If You want to change our code and not add a few hundred MB of stuff to</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">        your distribution</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">   These and other limitations could cause serious legal problems if you ignore</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">   them, so it is best to simply contact us or the Free Software Foundation, if</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">   you have any questions.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">   Joseph Toppi - toppij@gmail.com</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">   John Blackwood - makoenergy02@gmail.com</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifndef _asynchronousfileloadingworkunit_h</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _asynchronousfileloadingworkunit_h</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="asynchronousworkunit_8h.xhtml" title="Contains an interface for a kind of WorkUnit that loads or does other work even when the frame schedu...">asynchronousworkunit.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// @file</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/// @brief The declaration of the @ref Mezzanine::Threading::AsynchronousFileLoadWorkUnit &quot;AsynchronousFileLoadWorkUnit&quot; a workunit that loads a listing of files asynchronously.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span><span class="keyword">namespace </span>Mezzanine</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">namespace </span>Threading</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    {<span class="comment"></span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">        /// @brief An Internal helper function for the @ref AsynchronousFileLoadWorkUnit. This is the function that AsynchronousFileLoadWorkUnit instances will use to load data.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">        /// @details There is a 1 to 1 relationship between this function and its associated @ref Mezzanine::Threading::AsynchronousFileLoadWorkUnit &quot;AsynchronousFileLoadWorkUnit&quot;.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">        /// This is the function run in another thread to allow loading asynchrously.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">        /// @param WU A pointer to the @ref Mezzanine::Threading::AsynchronousFileLoadWorkUnit &quot;AsynchronousFileLoadWorkUnit&quot; that is passed to the asynchronous thread to be used as metadata.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="namespaceMezzanine_1_1Threading.xhtml#ad1ce7d1f48645a637bd5ffd8c692279c" title="An Internal helper function for the AsynchronousFileLoadWorkUnit. This is the function that Asynchron...">ThreadLoading</a>(<span class="keywordtype">void</span>* WU);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">        /// @brief A simple in memory representation of a file.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml">   59</a></span>&#160;<span class="comment"></span>        <span class="keyword">class </span><a class="code" href="crossplatformexport_8h.xhtml#a455f91aab9e6a1cf4286f5cdfa74c7bc" title="Some platforms require special decorations to denote what is exported/imported in a share library...">MEZZ_LIB</a> <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">                /// @brief How big is the file in bytes?</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#a0571e4d9b35abbc5713348b6bf0735d0">   63</a></span>&#160;<span class="comment"></span>                <a class="code" href="namespaceMezzanine.xhtml#ad7ab1b85229be184e16d96c505143f9b" title="A large integer type suitable for compile time math and long term microsecond time keeping...">MaxInt</a> <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#a0571e4d9b35abbc5713348b6bf0735d0" title="How big is the file in bytes?">Size</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">                /// @brief A pointer to a block of memory as it was loaded raw from the file.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#ab771fdd617ed0e93ddc0fe2b9e1d8d47">   66</a></span>&#160;<span class="comment"></span>                <a class="code" href="namespaceMezzanine.xhtml#aa5f38583d9025e05fa33d6e32e97b457" title="An 8-bit unsigned integer.">UInt8</a>* <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#ab771fdd617ed0e93ddc0fe2b9e1d8d47" title="A pointer to a block of memory as it was loaded raw from the file.">Data</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">                /// @brief Constructor</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">                /// @details Allocates space of the amount passed. In the @ref Mezzanine::Threading::AsynchronousFileLoadWorkUnit &quot;AsynchronousFileLoadWorkUnit&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">                /// this is the size of the file to be loaded.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">                /// @param BufferSize The size of the buffer to allocate.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#a34c487840df68f027f0627486c216130">   72</a></span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>(<span class="keyword">const</span> <a class="code" href="namespaceMezzanine.xhtml#ad7ab1b85229be184e16d96c505143f9b" title="A large integer type suitable for compile time math and long term microsecond time keeping...">MaxInt</a> BufferSize) : Size(BufferSize)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                    { Data = <span class="keyword">new</span> <a class="code" href="namespaceMezzanine.xhtml#aa5f38583d9025e05fa33d6e32e97b457" title="An 8-bit unsigned integer.">UInt8</a>[BufferSize]; }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">                /// @brief De-allocates the memory for the file.  This make deleting Data manually a bad idea.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml#ae225a8eb5d0080c5baa180bbe6a00276">   76</a></span>&#160;<span class="comment"></span>                ~<a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>()</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    <span class="keywordflow">if</span>(Data)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        { <span class="keyword">delete</span>[] Data; }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">                /// @brief Copying this class is a bad idea, private copy constructor</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>(<a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>&amp;) {}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">                /// @brief Assigning this class is bad, private operator=.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">                /// @param Unused Like it says it is unused in any real sense, it is returned to prevent compiler warnings.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">                /// @return Returns *this.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span>                RawFile&amp; operator=(RawFile&amp; Unused) { <span class="keywordflow">return</span> Unused; }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        };<span class="comment">//RawFile</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">        /// @brief This is intended to load files asynchronously and continue doing so whether or not other the @ref FrameScheduler is running or paused.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">        /// @details The goal is to trigger lower level mechanisms to use DMA to load directly without CPU intervention. In some operating systems this</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">        /// is handled in the standard library, and in others special mechanisms must be used to make this happen. The current state of this allows</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">        /// testing to determine how good automatic mechanisms work.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml">   96</a></span>&#160;<span class="comment"></span>        <span class="keyword">class </span><a class="code" href="crossplatformexport_8h.xhtml#a455f91aab9e6a1cf4286f5cdfa74c7bc" title="Some platforms require special decorations to denote what is exported/imported in a share library...">MEZZ_LIB</a> <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml" title="This is intended to load files asynchronously and continue doing so whether or not other the FrameSch...">AsynchronousFileLoadWorkUnit</a> : <span class="keyword">public</span> <a class="code" href="classMezzanine_1_1Threading_1_1iAsynchronousWorkUnit.xhtml" title="The interface for a WorkUnit that will keep running when the rest of the scheduler is paused...">iAsynchronousWorkUnit</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        {<span class="comment"></span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">            /// @cond false</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span>            <span class="comment">// If only there was a way to pass member function to the thread constructor.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="namespaceMezzanine_1_1Threading.xhtml#ad1ce7d1f48645a637bd5ffd8c692279c" title="An Internal helper function for the AsynchronousFileLoadWorkUnit. This is the function that Asynchron...">ThreadLoading</a>(<span class="keywordtype">void</span>* WU);<span class="comment"></span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">            /// @endcond</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keyword">protected</span>:<span class="comment"></span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">                /// @brief The names of the files this batch of loading will retrieve.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a22ebc4c42abf9961e780c0d6c2d7038a">  105</a></span>&#160;<span class="comment"></span>                std::vector&lt;String&gt; <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a22ebc4c42abf9961e780c0d6c2d7038a" title="The names of the files this batch of loading will retrieve.">Filenames</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">                /// @brief Used to make referencing the the type of @ref FilesRaw easier.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>                <span class="keyword">typedef</span> std::vector&lt;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                            <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>*</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a0c17d332bee02a03076b635a5d29fc8c">  110</a></span>&#160;                        &gt; <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a0c17d332bee02a03076b635a5d29fc8c" title="Used to make referencing the the type of FilesRaw easier.">RawFileContainer</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                /// @brief The contents of the files once they have been loaded. No partial files will exists here, either the whole file is added or nothing is added.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a080568934399e6bdd97b369d37c31c66">  113</a></span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a0c17d332bee02a03076b635a5d29fc8c" title="Used to make referencing the the type of FilesRaw easier.">RawFileContainer</a> <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a080568934399e6bdd97b369d37c31c66" title="The contents of the files once they have been loaded. No partial files will exists here...">FilesRaw</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">                /// @brief This is either 0 or the other thread that is loading.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a295e574bd2f6217688a82c8eb5416e60">  116</a></span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1Thread.xhtml" title="A small wrapper around the system thread.">Thread</a>* <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a295e574bd2f6217688a82c8eb5416e60" title="This is either 0 or the other thread that is loading.">LoadingThread</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">                /// @brief This stores the current RunningState.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a0d04c16c9715f662d128822a14cf6358">  119</a></span>&#160;<span class="comment"></span>                <a class="code" href="namespaceMezzanine.xhtml#a590a2f3eb4a187e1b25209e546e540e1" title="An 32-bit integer.">Int32</a> <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml#a0d04c16c9715f662d128822a14cf6358" title="This stores the current RunningState.">Status</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">                /// @brief Default constructor.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml" title="This is intended to load files asynchronously and continue doing so whether or not other the FrameSch...">AsynchronousFileLoadWorkUnit</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">                /// @brief Destructor, deletes all loaded files.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span>                <span class="keyword">virtual</span> ~<a class="code" href="classMezzanine_1_1Threading_1_1AsynchronousFileLoadWorkUnit.xhtml" title="This is intended to load files asynchronously and continue doing so whether or not other the FrameSch...">AsynchronousFileLoadWorkUnit</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">                /// @brief Begin loading a list of files based on their names.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                /// @param Filenames_ A vector of Strings that correspond to either relative or absolute filenames that will be loaded.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">                /// @details When the file is loaded its contents are placed in a @ref RawFile and can be retrieved with @ref GetFile</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">                /// or @ref GetFile member functions.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">                /// @n @n</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">                /// This starts by clearing the previous list of loaded files. If that list has not been deleted then</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">                /// this will cause a memory leak. Use @ref DeleteLoadedFiles to clear this list or copy all the pointers elsewhere before</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">                /// calling this and delete them manually at your convience. When this work unit is destroyed it deletes any loaded files from</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">                /// the last call of this method.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">                /// @n @n</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">                /// If this is called while it is loading files the behavior is undefined, most likely it will crash or fail silently, either</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">                /// way no good can come from it. Use @ref IsWorkDone to see if the work is @ref Complete &quot;Complete&quot;. If the work is complete</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">                /// then this can be called after any call to this class&#39;s @ref DoWork member function.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">                /// @warning This can leak memory if not used in conjuction with memory management or @ref DeleteLoadedFiles and read the details.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">                /// @warning This can fail in horrible ways if called twice without waiting for the first call to finish, use @ref IsWorkDone and read the details.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">                /// @return This returns @ref Starting &quot;Starting&quot; when loading is successful started and who knows what it returns if it fails, likely a segfault or GPF.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>                <a class="code" href="namespaceMezzanine_1_1Threading.xhtml#a1a21883adf1ed757a3926c29a5486a8e" title="Used to track whether a thread has started, completed, etc...">RunningState</a> BeginLoading(<span class="keyword">const</span> std::vector&lt;String&gt;&amp; Filenames_);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                /// @brief This checks if Asynchronous loading thread has completed and if so it cleans up that threads&#39; resources.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span>                <span class="keyword">virtual</span> <span class="keywordtype">void</span> DoWork(<a class="code" href="classMezzanine_1_1Threading_1_1ThreadSpecificStorage.xhtml" title="A thread specific collection of double-buffered and algorithm specific resources.">DefaultThreadSpecificStorage::Type</a>&amp;);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                /// @brief Get the @ref RunningState of the file loading</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                /// @details This can return any @ref RunningState and the meaning applies to the current state of the files being loaded.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                ///     - @ref NotStarted &quot;NotStarted&quot; - Either @ref BeginLoading has not been called or it has been called and has not progressed to the point where it sets this. Not useful for making logical decisions without knowledge of how many times @ref BeginLoading has been called.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                ///     - @ref Starting &quot;Starting&quot; - This is returned from @ref BeginLoading is success conditions, and is never returned from this.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                ///     - @ref Running &quot;Running&quot; - This means that the loading thread has started but not yet completed.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                ///     - @ref Complete &quot;Complete&quot; - The loading thread has completed its work, and new loading can definitely begin after the next call to @ref DoWork method.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                ///     - @ref Failed &quot;Failed&quot; - If somekind of recoverable error occured, this will be returned, there are no guarantees about the state of the loaded files.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                /// @return The running state as of the time of this call, though it is subject to immediate thread unsafe change.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span>                <span class="keyword">virtual</span> <a class="code" href="namespaceMezzanine_1_1Threading.xhtml#a1a21883adf1ed757a3926c29a5486a8e" title="Used to track whether a thread has started, completed, etc...">RunningState</a> IsWorkDone();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                /// @brief Get a loaded @ref RawFile in linear time.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">                /// @details This searches the list of files names to determine the index of the filename then calls @ref GetFile &quot;GetFile&quot;.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">                /// @param FileName The file to retrieve.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                /// @return A pointer to a @ref RawFile or 0 if it cannot be retrieved for any reason.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>* GetFile(<span class="keyword">const</span> <a class="code" href="namespaceMezzanine.xhtml#acf9fcc130e6ebf08e3d8491aebcf1c86" title="A datatype used to a series of characters.">String</a>&amp; FileName) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                /// @brief Retrieve a pointer to file contents in constant time.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">                /// @param Index The index of the File Name when it was passed into @ref BeginLoading &quot;BeginLoading&quot;.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">                /// @return This returns a null pointer if the correct @ref RawFile cannot be retrieved, otherwise a pointer to the @ref RawFile with index corresponing to the index of a passed in filename is returned.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                /// @warning Do no call this before @ref IsWorkDone() indicates that the work is @ref Complete &quot;Complete&quot;. These memory addresses are subject to change until all loading is complete.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span>                <a class="code" href="classMezzanine_1_1Threading_1_1RawFile.xhtml" title="A simple in memory representation of a file.">RawFile</a>* GetFile(<span class="keyword">const</span> <a class="code" href="namespaceMezzanine.xhtml#adcbb6ce6d1eb4379d109e51171e2e493" title="Whole is an unsigned integer, it will be at least 32bits in size.">Whole</a>&amp; Index) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">                /// @brief This deletes all the loaded files from the last call of @ref BeginLoading &quot;BeginLoading&quot; .</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span>                <span class="keywordtype">void</span> DeleteLoadedFiles();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        };<span class="comment">//AsynchronousFileLoadWorkUnit</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    } <span class="comment">// \Threading</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}<span class="comment">// \Mezzanine</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 15 2013 04:00:23 for MezzanineEngine by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1</small></address>
</body>
</html>
